<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Classroom</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#4a90e2">
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icon.png">
    <link rel="manifest" href="manifest.json">

    <style>
        /* =========================================
           1. å­—é«”è¨­å®š (FONT SETUP)
           ========================================= */
        @font-face {
            font-family: 'ZhuyinFont';
            /* è«‹ç¢ºèª classroom/fonts/zhuyin.ttf å­˜åœ¨ */
            src: url('./fonts/zhuyin.ttf') format('truetype'); 
            font-display: swap;
        }

        :root {
            --primary: #4a90e2;
            --hunter-bg: #e3f2fd;
            --angus-bg: #fff3cd;
        }

        body {
            font-family: "Microsoft JhengHei", -apple-system, sans-serif;
            background: #f4f6f8;
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* === â— å¼·åˆ¶å¥—ç”¨æ³¨éŸ³å­—é«”çš„å€åŸŸ â— === */
        /* åŒ…å«ï¼šè§’è‰²æ¨™é¡Œã€é¸å–®æ¨™é¡Œã€é¡Œç›®å¤§å­—ã€å‰¯æ¨™é¡Œã€é¸é …æŒ‰éˆ• */
        .role-info h2,
        .role-info p,
        .menu-title,
        .menu-sub,
        .q-text,
        .q-sub,
        .opt-btn,
        .hint-toggle,
        .use-zhuyin {
            font-family: 'ZhuyinFont', "Microsoft JhengHei", sans-serif !important;
            font-weight: normal; /* æ³¨éŸ³é«”ä¸é©åˆåŠ ç²—ï¼Œæœƒç³Šæ‰ */
        }

        /* é€šç”¨å…ƒä»¶ */
        .hidden { display: none !important; }
        .btn { border: none; border-radius: 12px; cursor: pointer; transition: 0.2s; font-weight: bold; display: flex; align-items: center; justify-content: center; outline: none; }
        .btn:active { transform: scale(0.96); }
        .icon-btn { background: #eee; width: 50px; height: 50px; border-radius: 50%; font-size: 24px; border: none; cursor: pointer; }
        
        /* å°è¦½åˆ— */
        .navbar { width: 100%; padding: 15px 20px; background: white; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 100; box-sizing: border-box; }
        .score-board { font-size: 20px; color: #555; font-weight: bold; font-family: -apple-system, sans-serif; }

        /* é¦–é  */
        #home-view { display: flex; flex-direction: column; gap: 20px; margin-top: 10vh; width: 90%; max-width: 400px; }
        .role-card { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 8px 20px rgba(0,0,0,0.08); display: flex; align-items: center; gap: 20px; cursor: pointer; transition: 0.3s; }
        .role-card:active { transform: scale(0.98); }
        .role-avatar { font-size: 40px; background: #eee; width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .role-info h2 { margin: 0; font-size: 28px; color: #333; }
        .role-info p { margin: 5px 0 0; color: #888; font-size: 16px; }
        
        /* ä¸»é¡Œè‰² */
        .hunter-app { background: var(--hunter-bg); }
        .angus-app { background: var(--angus-bg); }
        
        /* é¸å–® */
        .menu-list { display: grid; grid-template-columns: 1fr; gap: 15px; width: 90%; max-width: 500px; padding: 20px 0; }
        .menu-item { background: white; padding: 20px; border-radius: 15px; text-align: left; box-shadow: 0 4px 10px rgba(0,0,0,0.05); border-left: 8px solid var(--primary); display: block; width: 100%; box-sizing: border-box; }
        .menu-title { font-size: 24px; color: #333; margin-bottom: 8px; display: block;}
        .menu-sub { font-size: 16px; color: #888; display: block;}

        /* ç­”é¡Œå¡ç‰‡ */
        .quiz-container { width: 90%; max-width: 500px; display: flex; flex-direction: column; align-items: center; padding-top: 20px; }
        .card { background: white; width: 100%; padding: 30px 20px; border-radius: 25px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); text-align: center; margin-bottom: 25px; position: relative; box-sizing: border-box; }
        
        /* é¡Œç›®æ–‡å­—å¤§å°èª¿æ•´ */
        .q-text { font-size: 64px; color: #333; margin: 15px 0; min-height: 80px; display: flex; align-items: center; justify-content: center; line-height: 1.3; }
        .q-sub { font-size: 20px; color: #666; margin-top: -10px; margin-bottom: 10px; }

        /* é¸é …å€ */
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; }
        .opt-btn { background: white; border: 3px solid #eee; padding: 15px; font-size: 36px; border-radius: 15px; color: #555; min-height: 80px; }
        .opt-btn.correct { background: #d4edda; border-color: #28a745; color: #155724; }
        .opt-btn.wrong { background: #f8d7da; border-color: #dc3545; color: #721c24; }

        /* æ•¸å­—éµç›¤ (æ•¸å­¸ç”¨) */
        .numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; width: 100%; }
        .num-btn { background: white; padding: 15px; font-size: 28px; border-radius: 12px; box-shadow: 0 4px 0 #ccc; color: #333; border: 1px solid #ddd; }
        .num-btn:active { box-shadow: none; transform: translateY(4px); }
        .action-btn { background: var(--primary); color: white; box-shadow: 0 4px 0 #2a6bb3; border: none; }
        .half-btn { grid-column: span 3; background: #e1f5fe; font-size: 22px; }

        .hint-toggle { margin-top: 10px; background: #fff3cd; color: #856404; padding: 8px 20px; font-size: 18px; border-radius: 20px; }
        
        /* æ™‚é˜ç•«å¸ƒ */
        canvas { background: white; border-radius: 50%; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-bottom: 20px; max-width: 100%; }
    </style>
</head>
<body>

    <nav id="navbar" class="navbar hidden">
        <div class="btn" onclick="goHome()" style="font-size:24px;">ğŸ </div>
        <div id="nav-title" style="font-size: 20px; color:#4a90e2;" class="use-zhuyin">Classroom</div>
        <div class="score-board">â­ <span id="score">0</span></div>
    </nav>

    <div id="home-view">
        <div class="role-card" onclick="selectRole('hunter')" style="border-left: 6px solid #4facfe;">
            <div class="role-avatar" style="background:#e3f2fd;">ğŸ‘¦</div>
            <div class="role-info">
                <h2>å“¥å“¥ Hunter</h2>
                <p>åœ‹èªã€æ•¸å­¸ã€è‹±æ–‡</p>
            </div>
        </div>
        <div class="role-card" onclick="selectRole('angus')" style="border-left: 6px solid #ff9a9e;">
            <div class="role-avatar" style="background:#fff3cd;">ğŸ‘¶</div>
            <div class="role-info">
                <h2>å¼Ÿå¼Ÿ Angus</h2>
                <p>æ³¨éŸ³ã€æ•¸ó ‡¡æ•¸ã€æ™‚é˜</p>
            </div>
        </div>
    </div>

    <div id="app-container" class="hidden"></div>

    <script src="questions.js"></script>

<script src="questions.js"></script>

    <script>
        // ==========================================
        // âš™ï¸ é‚è¼¯æ§åˆ¶ä¸­å¿ƒ (LOGIC ONLY) - v2.0 åˆ†é¡ç‰ˆ
        // ==========================================
        let currentRole = null;
        let score = 0;
        let currentQ = null;
        let inputBuffer = ""; 
        let mathConfig = null;

        // --- è§’è‰²èˆ‡å°èˆª ---
        function selectRole(role) {
            currentRole = role;
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('navbar').classList.remove('hidden');
            document.getElementById('app-container').classList.remove('hidden');
            
            document.body.className = role === 'hunter' ? 'hunter-app' : 'angus-app';
            document.getElementById('nav-title').innerText = role === 'hunter' ? 'Hunter çš„æ•™å®¤' : 'Angus çš„éŠæˆ²';
            
            // åˆ¤æ–·æ˜¯å“¥å“¥é‚„æ˜¯å¼Ÿå¼Ÿï¼Œé€²å…¥ä¸åŒçš„é¸å–®é‚è¼¯
            if (role === 'hunter') {
                showHunterCategories(); // å“¥å“¥ï¼šé¡¯ç¤ºç§‘ç›®åˆ†é¡
            } else {
                showAngusMenu(); // å¼Ÿå¼Ÿï¼šç›´æ¥é¡¯ç¤ºæ‰€æœ‰é …ç›® (å› ç‚ºé …ç›®å°‘)
            }
        }

        function goHome() {
            document.getElementById('home-view').classList.remove('hidden');
            document.getElementById('navbar').classList.add('hidden');
            document.getElementById('app-container').classList.add('hidden');
            document.body.className = '';
            currentRole = null;
        }

        // ==========================================
        // ğŸ‘¦ å“¥å“¥çš„é¸å–®é‚è¼¯ (å…©å±¤å¼ï¼šç§‘ç›® -> å–®å…ƒ)
        // ==========================================
        
        // ç¬¬ä¸€å±¤ï¼šé¡¯ç¤ºä¸‰å¤§ç§‘ç›®
        function showHunterCategories() {
            const container = document.getElementById('app-container');
            container.innerHTML = `<div class="menu-list" id="menu-list"></div>`;
            const list = document.getElementById('menu-list');

            // åœ‹èªæŒ‰éˆ•
            addMenuItem(list, "ğŸ“š åœ‹èª", "é¦–å†Šæ‹¼éŸ³ã€ä¸€å†Šèªå­—", () => showHunterSubject('chinese'), '#ff9a9e');
            // æ•¸å­¸æŒ‰éˆ•
            addMenuItem(list, "ğŸ”¢ æ•¸å­¸", "å—ä¸€ç‰ˆé€²åº¦ç·´ç¿’", () => showHunterSubject('math'), '#4facfe');
            // è‹±æ–‡æŒ‰éˆ•
            addMenuItem(list, "ğŸ”¤ è‹±æ–‡", "é›™èªç¹ªæœ¬å–®å­—", () => showHunterSubject('english'), '#a8e6cf');
        }

        // ç¬¬äºŒå±¤ï¼šé¡¯ç¤ºè©²ç§‘ç›®çš„ç´°é …
        function showHunterSubject(subject) {
            const container = document.getElementById('app-container');
            container.innerHTML = `<div class="menu-list" id="menu-list"></div>`;
            const list = document.getElementById('menu-list');

            // åŠ å…¥ã€Œå›ä¸Šä¸€é ã€æŒ‰éˆ•
            addBackBtn(list, "â¬…ï¸ å›ç§‘ç›®é¸å–®", () => showHunterCategories());

            if (subject === 'chinese') {
                addMenuItem(list, "é¦–å†Š (æ‹¼éŸ³)", "è½éŸ³é¸æ³¨éŸ³", () => startQuiz('h_zhuyin'));
                addMenuItem(list, "ç¬¬ä¸€å†Š (èªå­—)", "éƒ¨é¦–èˆ‡ç­†ç•«", () => startQuiz('h_char'));
            } 
            else if (subject === 'math') {
                DB.hunter.mathUnits.forEach(u => {
                    addMenuItem(list, u.name, u.desc, () => startMath(u));
                });
            } 
            else if (subject === 'english') {
                addMenuItem(list, "é›™èªç¹ªæœ¬å–®å­—", "è½éŸ³è¾¨å­— (å«æç¤º)", () => startQuiz('h_english'));
            }
        }

        // ==========================================
        // ğŸ‘¶ å¼Ÿå¼Ÿçš„é¸å–®é‚è¼¯ (å–®å±¤å¼)
        // ==========================================
        function showAngusMenu() {
            const container = document.getElementById('app-container');
            container.innerHTML = `<div class="menu-list" id="menu-list"></div>`;
            const list = document.getElementById('menu-list');

            addMenuItem(list, "æ³¨éŸ³ç¬¦è™Ÿæ‰¾æ‰¾çœ‹", "è½éŸ³æ‰¾å­— (å…¨ç¯„åœ)", () => startQuiz('a_zhuyin'));
            addMenuItem(list, "è‹±æ–‡ï¼šç°¡å–®å–®å­—", "é¡è‰²ã€å‹•ç‰©", () => startQuiz('a_english'));
            DB.angus.mathUnits.forEach(u => {
                addMenuItem(list, "æ•¸å­¸ï¼š" + u.name, u.desc, () => startMath(u));
            });
        }

        // --- è¼”åŠ©å‡½å¼ï¼šç”¢ç”ŸæŒ‰éˆ• ---
        function addMenuItem(parent, title, sub, action, color) {
            const btn = document.createElement('button');
            btn.className = 'menu-item btn';
            // å¦‚æœæœ‰æŒ‡å®šé¡è‰²ï¼Œæ”¹è®Šå·¦é‚Šé‚Šæ¡†é¡è‰²
            if (color) btn.style.borderLeftColor = color;
            
            btn.innerHTML = `<div><span class="menu-title">${title}</span><span class="menu-sub">${sub}</span></div>`;
            btn.onclick = action;
            parent.appendChild(btn);
        }

        function addBackBtn(parent, title, action) {
            const btn = document.createElement('button');
            btn.className = 'menu-item btn';
            btn.style.background = '#f1f1f1'; // ç°è‰²èƒŒæ™¯å€éš”
            btn.style.borderLeft = 'none';
            btn.innerHTML = `<span class="menu-title" style="font-size:18px; color:#666;">${title}</span>`;
            btn.onclick = action;
            parent.appendChild(btn);
        }

        // ==========================================
        // ğŸ® æ¸¬é©—é‚è¼¯ (Quiz) - é€™è£¡å¾€ä¸‹éƒ½æ²’è®Š
        // ==========================================
        function startQuiz(type) {
            score = 0;
            document.getElementById('score').innerText = 0;
            const container = document.getElementById('app-container');
            container.innerHTML = `
                <div class="quiz-container">
                    <div class="card">
                        <button class="icon-btn" onclick="speakCurrent()">ğŸ”Š</button>
                        <div id="q-display" class="q-text"></div>
                        <div id="hint-btn" class="hidden"></div>
                    </div>
                    <div id="opt-container" class="options-grid"></div>
                    <button class="btn" onclick="backToMenu()" style="margin-top:20px; color:#888; font-size:16px;">çµæŸç·´ç¿’</button>
                </div>`;
            nextQuizQuestion(type);
        }

        function nextQuizQuestion(type) {
            let qData, options;
            
            if (type === 'h_zhuyin') {
                qData = getRandom(DB.hunter.chinese_zhuyin);
                options = qData.opts;
            } else if (type === 'h_char') {
                qData = getRandom(DB.hunter.chinese_char);
                options = qData.opts;
            } else if (type === 'h_english') {
                qData = getRandom(DB.hunter.english);
                let wrongs = DB.hunter.english.filter(x => x.q !== qData.q).map(x => x.q);
                options = shuffle([qData.q, ...shuffle(wrongs).slice(0,3)]);
            } else if (type === 'a_zhuyin') {
                let char = getRandom(DB.angus.zhuyin);
                qData = { q: "?", a: char, audio: char, speak: "è«‹æ‰¾å‡º "+char };
                let wrongs = DB.angus.zhuyin.filter(x => x !== char);
                options = shuffle([char, ...shuffle(wrongs).slice(0,3)]);
            } else if (type === 'a_english') {
                qData = getRandom(DB.angus.english);
                let wrongs = DB.angus.english.filter(x => x.q !== qData.q).map(x => x.q);
                options = shuffle([qData.q, ...shuffle(wrongs).slice(0,3)]);
            }

            currentQ = qData;
            const display = document.getElementById('q-display');
            
            if (type === 'h_zhuyin') {
                display.innerHTML = qData.q; 
            } else if (type === 'h_char') {
                display.innerHTML = `<div>${qData.q}</div><div class="q-sub">${qData.sub}</div>`;
            } else if (type.includes('english')) {
                display.innerHTML = currentRole==='hunter' ? "???" : qData.q;
            } else if (type === 'a_zhuyin') {
                display.innerHTML = "?";
            }

            const hintDiv = document.getElementById('hint-btn');
            if (type.includes('english') && qData.hint) {
                hintDiv.className = 'btn hint-toggle';
                hintDiv.innerText = "ğŸ’¡ çœ‹æç¤º";
                hintDiv.onclick = () => { display.innerText = qData.q; hintDiv.innerText = qData.hint; };
                hintDiv.classList.remove('hidden');
            } else { hintDiv.classList.add('hidden'); }

            setTimeout(() => speakCurrent(), 300);

            const optContainer = document.getElementById('opt-container');
            optContainer.innerHTML = '';
            options.forEach(opt => {
                let btn = document.createElement('button');
                btn.className = 'opt-btn btn';
                btn.innerText = opt;
                let correctAns = qData.a || qData.q;
                btn.onclick = () => checkAnswer(btn, opt, correctAns, type);
                optContainer.appendChild(btn);
            });
        }

        function checkAnswer(btn, selected, correct, type) {
            if (selected === correct) {
                btn.classList.add('correct');
                score++;
                document.getElementById('score').innerText = score;
                setTimeout(() => nextQuizQuestion(type), 800);
            } else {
                btn.classList.add('wrong');
            }
        }

        // ==========================================
        // ğŸ”¢ æ•¸å­¸é‚è¼¯ (Math)
        // ==========================================
        function startMath(config) {
            score = 0;
            document.getElementById('score').innerText = 0;
            mathConfig = config;
            const container = document.getElementById('app-container');
            container.innerHTML = `
                <div class="quiz-container">
                    <canvas id="clock-canvas" width="250" height="250" class="hidden"></canvas>
                    <div class="card" style="padding: 15px;">
                        <div id="math-q" class="q-text"></div>
                        <div id="math-sub" class="q-sub"></div>
                        <div id="math-input" style="font-size:40px; color:#4a90e2; border-bottom:2px solid #ddd; height:50px; width:100%; margin-top:10px;"></div>
                    </div>
                    <div class="numpad">
                        <button class="num-btn" onclick="inputNum(1)">1</button>
                        <button class="num-btn" onclick="inputNum(2)">2</button>
                        <button class="num-btn" onclick="inputNum(3)">3</button>
                        <button class="num-btn" onclick="inputNum(4)">4</button>
                        <button class="num-btn" onclick="inputNum(5)">5</button>
                        <button class="num-btn" onclick="inputNum(6)">6</button>
                        <button class="num-btn" onclick="inputNum(7)">7</button>
                        <button class="num-btn" onclick="inputNum(8)">8</button>
                        <button class="num-btn" onclick="inputNum(9)">9</button>
                        <button class="num-btn" onclick="inputNum('C')" style="color:orange;">C</button>
                        <button class="num-btn" onclick="inputNum(0)">0</button>
                        <button class="num-btn action-btn" onclick="checkMath()">OK</button>
                        <button id="half-btn" class="num-btn half-btn hidden" onclick="inputNum(':30')">ğŸ•’ åŠ (:30)</button>
                    </div>
                    <button class="btn" onclick="backToMenu()" style="margin-top:20px; color:#999; font-size:16px;">çµæŸç·´ç¿’</button>
                </div>`;
            nextMathQuestion();
        }

        function nextMathQuestion() {
            inputBuffer = "";
            document.getElementById('math-input').innerText = "";
            document.getElementById('half-btn').classList.add('hidden');
            document.getElementById('clock-canvas').classList.add('hidden');
            document.getElementById('math-q').classList.remove('hidden');

            let config = mathConfig;
            let qText = "", qSub = "", ans = "";

            let currentType = config.type;
            if (config.type === 'mix') {
                const types = ['add', 'sub', 'decomp', 'clock'];
                currentType = types[Math.floor(Math.random() * types.length)];
            }

            if (currentType === 'add') {
                let a = Math.floor(Math.random() * (config.range + 1));
                let b = Math.floor(Math.random() * (config.range + 1 - a));
                qText = `${a} + ${b} = ?`; ans = (a+b).toString();
            } 
            else if (currentType === 'sub') {
                let a = Math.floor(Math.random() * (config.range + 1));
                let b = Math.floor(Math.random() * (a + 1));
                qText = `${a} - ${b} = ?`; ans = (a-b).toString();
            }
            else if (currentType === 'decomp') {
                let total = Math.floor(Math.random() * (config.range - 1)) + 2; 
                let p1 = Math.floor(Math.random() * total);
                qText = `${total} å¯ä»¥åˆ†æˆ`; qSub = `${p1} å’Œ ?`; ans = (total - p1).toString();
            }
            else if (currentType === 'count') {
                let count = Math.floor(Math.random() * 10) + 1;
                qText = "ğŸ".repeat(count); qSub = "æœ‰å¹¾å€‹?"; ans = count.toString();
            }
            else if (currentType === 'clock') {
                document.getElementById('clock-canvas').classList.remove('hidden');
                document.getElementById('math-q').classList.add('hidden');
                let h = Math.floor(Math.random() * 12) + 1;
                let m = 0;
                let isHalf = (config.range === 'half' || (config.type === 'mix' && Math.random() > 0.5)) && Math.random() > 0.5;
                if (isHalf) m = 30;
                drawClock(h, m);
                qSub = "é›»å­é˜æ€éº¼å¯«ï¼Ÿ";
                ans = m === 30 ? `${h}:30` : `${h}:00`;
                if (m === 30) document.getElementById('half-btn').classList.remove('hidden');
            }

            currentQ = { ans: ans, type: currentType };
            document.getElementById('math-q').innerText = qText;
            document.getElementById('math-sub').innerText = qSub;
        }

        function inputNum(val) {
            if (val === 'C') { inputBuffer = ""; }
            else {
                if (val === ':30' && (inputBuffer.includes(':') || inputBuffer === '')) return;
                if (inputBuffer.length > 5) return;
                inputBuffer += val;
            }
            document.getElementById('math-input').innerText = inputBuffer;
        }

        function checkMath() {
            let isCorrect = false;
            let correctAns = currentQ.ans;
            if ((currentQ.type === 'clock' || mathConfig.type === 'mix') && correctAns.endsWith(":00")) {
                if (inputBuffer === correctAns || inputBuffer === correctAns.split(":")[0]) isCorrect = true;
            } else {
                if (inputBuffer === correctAns) isCorrect = true;
            }

            const inputDiv = document.getElementById('math-input');
            if (isCorrect) {
                inputDiv.style.color = "#28a745";
                score++;
                document.getElementById('score').innerText = score;
                setTimeout(() => nextMathQuestion(), 600);
            } else {
                inputDiv.style.color = "#dc3545";
                setTimeout(() => { inputBuffer = ""; inputDiv.innerText = ""; inputDiv.style.color = "#4a90e2"; }, 500);
            }
        }

        // --- é€šç”¨åŠŸèƒ½ ---
        function backToMenu() {
            if (currentRole === 'hunter') {
                // å¦‚æœæ˜¯å“¥å“¥ï¼Œåˆ¤æ–·ç¾åœ¨æ˜¯åœ¨ç§‘ç›®é¸å–®é‚„æ˜¯æœ€ä¸Šå±¤ï¼Ÿ
                // ç‚ºäº†ç°¡å–®ï¼Œçµ±ä¸€å›åˆ°ã€Œç§‘ç›®é¸æ“‡ã€
                showHunterCategories();
            } else {
                showAngusMenu();
            }
        }

        function speakCurrent() {
            if (!currentQ) return;
            let text = currentQ.speak || currentQ.audio || currentQ.q;
            if (!text || text.includes('ğŸ') || text.includes('?')) return; 
            let u = new SpeechSynthesisUtterance(text);
            u.lang = /[a-zA-Z]/.test(text) ? 'en-US' : 'zh-TW';
            u.rate = 0.8;
            window.speechSynthesis.cancel();
            window.speechSynthesis.speak(u);
        }
        function getRandom(arr) { return arr[Math.floor(Math.random() * arr.length)]; }
        function shuffle(arr) { return arr.sort(() => Math.random() - 0.5); }

        function drawClock(hour, minute) {
            const canvas = document.getElementById('clock-canvas');
            const ctx = canvas.getContext('2d');
            const r = canvas.width / 2;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.translate(r, r);
            ctx.beginPath(); ctx.arc(0, 0, r - 5, 0, 2 * Math.PI); ctx.fillStyle = "white"; ctx.fill(); ctx.strokeStyle = "#333"; ctx.lineWidth = 4; ctx.stroke();
            for(let i=0; i<12; i++){ ctx.beginPath(); ctx.rotate(Math.PI / 6); ctx.moveTo(0, - (r - 15)); ctx.lineTo(0, - (r - 5)); ctx.stroke(); }
            let hAngle = (hour % 12) * Math.PI / 6 + (minute * Math.PI / (6 * 60));
            let mAngle = minute * Math.PI / 30;
            ctx.strokeStyle = "#333"; ctx.lineWidth = 8; ctx.lineCap = "round"; ctx.beginPath(); ctx.rotate(hAngle); ctx.moveTo(0, 0); ctx.lineTo(0, -r * 0.5); ctx.stroke(); ctx.rotate(-hAngle);
            ctx.strokeStyle = "#e74c3c"; ctx.lineWidth = 5; ctx.beginPath(); ctx.rotate(mAngle); ctx.moveTo(0, 0); ctx.lineTo(0, -r * 0.75); ctx.stroke(); ctx.rotate(-mAngle);
            ctx.beginPath(); ctx.arc(0, 0, 6, 0, 2*Math.PI); ctx.fillStyle = "#333"; ctx.fill(); ctx.translate(-r, -r);
        }
    </script>
</body>
</html>
